<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/>
		<title>音悦台</title>
		<link rel="stylesheet" type="text/css" href="css/reset.css"/>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
		<style type="text/css" id='css'></style>
	</head>
	<body>
		<section id="wrap">
			<header id='header'>
				<div id="head">
					<!--logo-->
					<h1 id='logo'>
						<a href="javascript:;">
							<img src="img/logo.png" alt="logo" />
						</a>
					</h1>
					<!--面包导航-->
					<a href="javascript:;" id="btnMenu" class="menuBtnClos"></a>
					<!--按钮排-->
					<div id='btns'>
						<a id='searchBtn' href="javascript:;">搜索</a>
						<a href="javascript:;">登陆</a>
						<a href="javascript:;">注册</a>
					</div>
				</div>
				<form id='search' action="#">
					<input type="text" placeholder="请输入搜索内容" />
					<input  type="submit" value="搜索"/>
				</form>
				<!--浮层-->
				<ul id="mask">
					<li><a href="javascript:;">首页</a></li>
					<li><a href="javascript:;">MV</a></li>
					<li><a href="javascript:;">悦单</a></li>
					<li><a href="javascript:;">V榜</a></li>
					<li><a href="javascript:;">音悦</a></li>
					<li><a href="javascript:;">商城</a></li>
					<li><a href="javascript:;">节目</a></li>
					<li><a href="javascript:;">饭团</a></li>
					<li><a href="javascript:;">资讯</a></li>
					<li><a href="javascript:;">我的家</a></li>
					<li><a href="javascript:;">APP下载</a></li>
					<li><a href="http://www.baidu.com">热门应用</a></li>
				</ul>
			</header>
			<section id='content'>
				<section id='inner'>
				<div id='nav'>
					<ul class="clearfix">
						<li class="active"><a href="javascript:;">首页</a></li>
						<li><a href="javascript:;">MV</a></li>
						<li><a href="javascript:;">悦单</a></li>
						<li><a href="javascript:;">V榜</a></li>
						<li><a href="javascript:;">音悦</a></li>
						<li><a href="javascript:;">商城</a></li>
						<li><a href="javascript:;">节目</a></li>
						<li><a href="javascript:;">饭团</a></li>
						<li><a href="javascript:;">资讯</a></li>
						<li><a href="javascript:;">我的家</a></li>
						<li><a href="javascript:;">APP下载</a></li>
						<li><a href="javascript:;">热门应用</a></li>
						<li><a href="javascript:;">百度</a></li>
						<li><a href="javascript:;">淘宝</a></li>
						<li><a href="javascript:;">美团</a></li>
						<li><a href="javascript:;">优酷</a></li>
						<li><a href="javascript:;">土豆</a></li>
						<li><a href="javascript:;">爱奇艺</a></li>
						<li><a href="javascript:;">魔兽</a></li>
					</ul>
				</div>
				<!--无缝滑屏-->
				<div id="pic_wrap">
					<ul id="pic_list">
						<li>
							<a href="#">
								<img src="img/1.jpg" alt="" />
							</a>
						</li>
						<li>
							<a href="#">
								<img src="img/2.jpg" alt="" />
							</a>
						</li>
						<li>
							<a href="#">
								<img src="img/3.jpg" alt="" />
							</a>
						</li>
						<li>
							<a href="#">
								<img src="img/4.jpg" alt="" />
							</a>
						</li>
						<li>
							<a href="#">
								<img src="img/5.jpg" alt="" />
							</a>
						</li>
					</ul>
					<div class="pic_nav">
						<span class="pic_active"></span>
						<span class="pic_drak"></span>
						<span class="pic_drak"></span>
						<span class="pic_drak"></span>
						<span class="pic_drak"></span>
					</div>
				</div>
				<!--可切换的选项卡-->
				<div class="tab">
					<header class="tab_header">
							<h2>MV主播</h2>
							<a href="javascript:;">更多&gt;</a>						
					</header>
					<div class="tab_nav">
							<a href="javascript:;">全部</a>
							<a href="javascript:;">内地</a>
							<a href="javascript:;">港台</a>
							<a href="javascript:;">欧美</a>
							<a href="javascript:;">韩国</a>
							<a href="javascript:;">日本</a>
							<span></span>
					</div>
					<div class="tab_wrap">
						<ul class="loading"></ul>
						<ul>
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="picture" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
				<div class="tab">
					<header class="tab_header">
							<h2>MV主播</h2>
							<a href="javascript:;">更多&gt;</a>						
					</header>
					<div class="tab_nav">
							<a href="javascript:;">全部</a>
							<a href="javascript:;">内地</a>
							<a href="javascript:;">港台</a>
							<a href="javascript:;">欧美</a>
							<a href="javascript:;">韩国</a>
							<a href="javascript:;">日本</a>
							<span></span>
					</div>
					<div class="tab_wrap">
						<ul class="loading"></ul>
						<ul>
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="picture" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
				<div class="tab">
					<header class="tab_header">
							<h2>MV主播</h2>
							<a href="javascript:;">更多&gt;</a>						
					</header>
					<div class="tab_nav">
							<a href="javascript:;">全部</a>
							<a href="javascript:;">内地</a>
							<a href="javascript:;">港台</a>
							<a href="javascript:;">欧美</a>
							<a href="javascript:;">韩国</a>
							<a href="javascript:;">日本</a>
							<span></span>
					</div>
					<div class="tab_wrap">
						<ul class="loading"></ul>
						<ul>
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="picture" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
				<div class="tab">
					<header class="tab_header">
							<h2>MV主播</h2>
							<a href="javascript:;">更多&gt;</a>						
					</header>
					<div class="tab_nav">
							<a href="javascript:;">全部</a>
							<a href="javascript:;">内地</a>
							<a href="javascript:;">港台</a>
							<a href="javascript:;">欧美</a>
							<a href="javascript:;">韩国</a>
							<a href="javascript:;">日本</a>
							<span></span>
					</div>
					<div class="tab_wrap">
						<ul class="loading"></ul>
						<ul>
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="picture" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
				<div class="tab">
					<header class="tab_header">
							<h2>MV主播</h2>
							<a href="javascript:;">更多&gt;</a>						
					</header>
					<div class="tab_nav">
							<a href="javascript:;">全部</a>
							<a href="javascript:;">内地</a>
							<a href="javascript:;">港台</a>
							<a href="javascript:;">欧美</a>
							<a href="javascript:;">韩国</a>
							<a href="javascript:;">日本</a>
							<span></span>
					</div>
					<div class="tab_wrap">
						<ul class="loading"></ul>
						<ul>
							<li>
								<a href="javascript:;">
									<img src="img/a.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/b.jpg" alt="picture" />
									<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/c.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/d.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/e.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/f.jpg" alt="picture" />
									<span>君に贈る花がない</span>
								</a>
								<div class="tab_ice clearfix">
									<div class="tab_ice_l">
										<span class="tab_ice_l_pic"></span>
										<span>9877</span>
									</div>
									<div class="tab_ice_r">
										<span class="tab_ice_r_pic"></span>
										<span>9</span>
									</div>
								</div>
							</li>
						</ul>
						<ul class="loading"></ul>
					</div>
				</div>
				</section>
			</section>
			<div id="scrollBar"></div>
		</section>
	</body>
	<script type="text/javascript" src="js/transform.js"></script>
	<script type="text/javascript" src="js/slide.js"></script>
	<script type="text/javascript">
	window.onload=function(){
	//清除移动端所有的默认行为
		document.addEventListener('touchstart',function(ev){
			ev=ev || event;
			ev.preventDefault();
		})
		//		rem适配
		;(function(){
			var width=document.documentElement.clientWidth;
			var styleEle=document.createElement('style');
			styleEle.innerHTML='html{font-size:'+(width/16)+'px!important;}';
			document.head.appendChild(styleEle);
		})();
		
		//可切换的选项卡
		changeTab();
		function changeTab(){
			var navNodes=getEle('content .tab .tab_nav',3);   //取导航元素
			var wrapNodes=getEle('content .tab .tab_wrap',3);  //取列表包裹元素
			var initX=-navNodes[0].offsetWidth;               //把导航宽度作为包裹元素的基准偏移量,导航宽正好是屏宽
			console.log(initX)
			var X='translateX';                   //定义X移动类型
			var Y='translateY';
			for(var i=0;i<wrapNodes.length;i++){
				move(wrapNodes[i],navNodes[i]);
			}
			function move(wrap,nav){
				var loadings=getEle('content .tab .tab_wrap .loading',3);  //取loading元素
				var spanG=nav.querySelector('span');                          //取导航下的span元素
				var alist=nav.querySelectorAll('a');                         //取导航下的a元素
				var num=0,start={},elem={},isF=true,isX=true,isL=false;     //初始化
				CSS(wrap,X,initX);                                         //让每个包裹元素默认向左位移一个视口,显示音乐内容
				CSS(wrap,'translateZ',0.1)   //开启GPU加速
				console.log('you are here');
				wrap.addEventListener('touchstart',function(ev){
					if(isL){return}                      //若在加载，return
					ev=ev||event;
					var touchC=ev.changedTouches[0];
					isF=true;
					isX=true;
					wrap.style.transition='none';
					start.x=touchC.clientX;
					start.y=touchC.clientY;
					elem.x=CSS(wrap,X);
					elem.y=CSS(wrap,Y);
				})
				wrap.addEventListener('touchmove',function(ev){
					if(!isX || isL){return}              //若不是一开始就横向操作或加载就return
					ev=ev||event;
					var touchC=ev.changedTouches[0];
					var now={};
					now.x=touchC.clientX;
					now.y=touchC.clientY;
					 var disX=now.x-start.x;
					var disY=now.y-start.y;
					if(isF){                        //每次move都会进入,且每次start都会重置,判断到底第一次操作是横向还是竖向
						isF=false;
						if(Math.abs(disY)-Math.abs(disX)>0){
							isX=false;
							return;
						}
					}
					CSS(wrap,X,elem.x+disX);        //让wrap实时位移
					if(Math.abs(disX)>Math.abs(initX/2)){    //实时判断位移是否大于屏幕的一半，若是，自动进
						end(disX);
					}
				})
				wrap.addEventListener('touchend',function(ev){
					if(isL){return}
					ev=ev||event;
					var touchC=ev.changedTouches[0];
					var now={}
					now.x=touchC.clientX;
					now.y=touchC.clientY;
					var disX=now.x-start.x;
					var disY=now.y-start.y;
					console.log(disX,initX)
					if(Math.abs(disX)<Math.abs(initX/2)){     //若结束时，位移不够一半的屏宽,就不产生新的位移，返回默认的位移
						console.log('hello')
						wrap.style.transition='.5s';
						CSS(wrap,X,initX);
					}
				})
				function end(disX){
					//只要进入end函数，说明外面的页面一定是加载中,可把isL设为true，禁止用户再操作
					isL=true;
					//若向左滑动,dir一定是-1,左滑动,num++，反之一样
					var dir=disX/Math.abs(disX);  
					var target=dir>0?0:2*initX;
					wrap.style.transition='.5s';
					CSS(wrap,X,target);
					//若左滑动,dir的值一定为-1  相当于 num= num-（-1），即num++
					num -= dir;  
					//无缝原理
					if(num<0){
						num=alist.length-1;
					}else if(num>alist.length-1){
						num=0;
					}
					//动画完成时触发,且只能执行一次,执行时马上清掉
					wrap.addEventListener("transitionend",transitionend);
					wrap.addEventListener("webkitTransitionEnd",transitionend);
				}
				//动画结束时候的回调函数,一执行，先解绑，然后发ajax请求数据回来，重绘页面
				function transitionend(){
					wrap.removeEventListener('transitionend',transitionend);
					wrap.removeEventListener('webkitTransitionEnd',transitionend);
					CSS(spanG,X,alist[num].offsetLeft);
					CSS(spanG,'translateZ',0.1)  //开启GPU加速
					//打开loading的转转转
					for(var i=0;i<loadings.length;i++){
						loadings[i].style.opacity='1';
					}
					//模拟发送请求,请求回来是，可以把isL设为false，运行用户操作
					setTimeout(function(){
						isL=false;
						for(var i=0;i<loadings.length;i++){
							loadings[i].style.opacity='0';
							wrap.style.transition='none';
							CSS(wrap,X,initX);
						}
					},3000)
				}
			}
		}

		//处理失焦获焦事件
		//获取元素  重绘重排后 querySelector的整个获取dom元素的机制会失效
		function changeInput(){
			var searchInputEle=document.querySelector('#search input[type=text]');
			searchInputEle.addEventListener('touchstart',function(ev){
				ev=ev || event;
				ev.stopPropagation();
				ev.preventDefault();
				searchInputEle.focus();
			})
			document.addEventListener('touchstart',function(){
				searchInputEle.blur();
			})
		}
		changeInput();
		//菜单切换
		function CMFCMenuBar(){
			var btnMenuEle=document.getElementById('btnMenu');
			var maskEle=document.getElementById('mask');
			btnMenuEle.addEventListener('touchstart',function(ev){
				ev=ev || event;
				ev.stopPropagation();       //取消冒泡
				ev.preventDefault();		//因为取消冒泡要重新阻止默认
				//如果当前是menuBtnClos则显示浮层,切换样式为打开
				if(btnMenuEle.className=='menuBtnClos'){
					btnMenuEle.className='menuBtnOpen';
					maskEle.style.display='block';
				}else{
					btnMenuEle.className='menuBtnClos';
					maskEle.style.display='none';
				}
			})
			document.addEventListener('touchstart',function(){
				if(btnMenuEle.className=='menuBtnOpen'){
					btnMenuEle.className='menuBtnClos';
					maskEle.style.display='none';
				}
			})
			maskEle.addEventListener('touchstart',function(ev){
				ev=ev || event;
				ev.stopPropagation();       //取消冒泡
				ev.preventDefault();		//因为取消冒泡要重新阻止默认
				
			})
		}
		CMFCMenuBar();
		
		//引入封装的变换函数CSS准备做导航的滑动效果,橡皮筋效果和快速滑屏效果
		function drag(){
			var docWidth=document.documentElement.clientWidth;
			var navEle=getEle('nav');
			var ulEle=getEle('nav ul');
			CSS(ulEle,'translateZ',0.1)  //开启3D硬件加速，解决安卓手机的卡顿问题
			//初始化元素位置和手指位置
			var elementX=0;
			var startX=0;
			//初始化快速滑屏需要的参数
			var lastTime=0;
			var lastPoint=0;
			var timeDis=1;    //必须写不为0的数,不然会报0/0等于NAN的错误
			var pointDis=0;   //位移差
			var minX=navEle.clientWidth-ulEle.offsetWidth;
			navEle.addEventListener('touchstart',function(ev){
				ev= ev || event;
				var touchEle=ev.changedTouches[0];
				ulEle.style.transition='none';    //进来的时候不能有过度效果
				elementX=CSS(ulEle,'translateX');  //读取元素的位移位置
				startX=touchEle.clientX;           //读取手指的开始位置
				pointDis=0;                       //移动事件结束后重置位移差
			})
			navEle.addEventListener('touchmove',function(ev){
				ev= ev || event;
				var touchEle=ev.changedTouches[0];
				var nowX=touchEle.clientX;     //实时获取手指当前位置
				var disX=nowX-startX;          //实时获取手指移位差
				var translateX=elementX+disX;  //实时获取元素的位移大小
				var scale=0;
				//处理左边的橡皮筋效果,当用户想向右滑动,将scale控制在0~1之间
				if(translateX>0){
					//把*2去掉可以去除在最左边状态时-先左移动，然后再慢慢向右移动时候产生的回弹小bug
					scale=docWidth/(docWidth*2+translateX);   
					translateX=elementX+(disX*scale);
				}else if(translateX<minX){
					//处理右边橡皮筋,当左滑动到极限例-10,如果还想滑动例-20,所以translateX<minX
					//把*2去掉可以去除在最左边状态时-先左移动，然后再慢慢向右移动时候产生的回弹小bug
					scale=docWidth/(docWidth*2+minX - translateX);
					translateX=elementX+(disX*scale);
				}
//				调用CSS函数
				CSS(ulEle,"translateX",translateX);
				var timeNow=new Date().getTime();
				//实时获取元素的移动位置
				var pointNow=CSS(ulEle,"translateX");
				timeDis=timeNow-lastTime;
				pointDis=pointNow-lastPoint;
				lastTime=timeNow;
				lastPoint=pointNow;
			})
			navEle.addEventListener('touchend',function(){
				//最后一次的平均速度,这个speed的值很小,需要乘以一个系数,例如200
				var speed=pointDis/timeDis;   
				console.log(speed);
				//事件结束时,获取元素最后一次的位置然后加上后补的速度偏移距离
				var target=CSS(ulEle,'translateX')+speed*200;
				//时间不能为负,限制时间过渡不能小于.3
				var time=Math.abs(speed)*.2
				time=time<.3?.3:time;
				console.log(time);
				var bezer='';
				if(target>0){
					target=0;
//					console.log(111)
//					ulEle.style.transition='.5s'
					bezer="cubic-bezier(.19,1.38,.52,1.32)";
				}else if(target<minX){
					target=minX;
//					console.log(222)
//					ulEle.style.transition='.5s'
					bezer="cubic-bezier(.19,1.38,.52,1.32)";
				}
				ulEle.style.transition=time+'s'+' '+bezer;
				CSS(ulEle,"translateX",target);
			})
		}
		drag();
		
		//竖向滑屏
		definedByMyself();
		function definedByMyself(){
			Qjian.xiaomei('content','inner','scrollBar','head','search');
		}
		
		//导航的点击改变方法
		function changeNavStyle(){
			var navEle=getEle('nav ul');
			var liEle=getEle('nav ul li','');
//			console.log(liEle.length);
			var start=0
			navEle.addEventListener('touchstart',function(ev){
				this.isMove=false;
				ev=ev||event;
				start=ev.changedTouches[0].clientX;
			})
			navEle.addEventListener('touchmove',function(ev){
				ev=ev||event;
				var now=ev.changedTouches[0].clientX;
				var disX=Math.abs(now-start);
				if(!this.isMove&&disX>2){
					this.isMove=true;
				}
			})
			navEle.addEventListener('touchend',function(ev){
				ev=ev||event;
				var touchC=ev.changedTouches[0];
				if(!this.isMove){
					for(var i=0;i<liEle.length;i++){
						liEle[i].className=''
					}
					if(touchC.target.nodeName.toUpperCase()==='LI'){
						touchC.target.className='active';
					}else if(touchC.target.nodeName.toUpperCase()==='A'){
						touchC.target.parentNode.className='active';
					}
				}
			})
		}
		changeNavStyle();
		
//		无缝滑屏
		seamless();
		function seamless(){
			var wrap=document.getElementById('pic_wrap');
			var list=document.getElementById('pic_list');
			var css=document.getElementById('css');
			CSS(list,'translateZ',.1);  //开启3D硬件加速
			list.innerHTML+=list.innerHTML;
			var lis=document.querySelectorAll('#pic_list li');
			var spanNodes=document.querySelectorAll('#pic_wrap .pic_nav span');
			var cssText='#pic_list{width:'+lis.length+'00%}';
			cssText+='#pic_list li{width:'+(100/lis.length)+'%}'
			cssText+='#pic_wrap{height:'+lis[0].offsetHeight+'px}'
			css.innerHTML+=cssText;
			//手指和元素初始位置
			var startX={};
			var elemX={};
			//给每个图片定义一个号码
			var now=0;
			var isX=true;
			var isFirst=true;
			//手指移动距离
			var disX=0;
			var dixY=0;
			//定义2D变量移动
			var  translateX=0;
			wrap.addEventListener("touchstart",function(ev){
				isX=true;
				isFirst=true;
				clearInterval(time);
				var touch=ev.changedTouches[0];
				startX.x=touch.clientX;
				startX.y=touch.clientY;
				//list.style.transition='none';
				var left=transformCss(list,'translateX');
				now=Math.round(-left/document.documentElement.clientWidth);
				
				if(now==0){
					now=spanNodes.length
				}else if(now==lis.length-1){
					now=spanNodes.length-1
				}
				//var translateX=-now * document.documentElement.clientWidth;
				//transformCss(list,'translateX',translateX);
				simple(list,'translateX',now,"none");
				//elemX=list.offsetLeft;
				//elemX=translateX;
				elemX.x=transformCss(list,'translateX');
			});
			wrap.addEventListener("touchmove",function(ev){
				if(!isX){
					return;
				}
				var touch=ev.changedTouches[0];
				var nowX={}
				nowX.x=touch.clientX;
				nowX.y=touch.clientY;
				disX=nowX.x-startX.x;
				disY=nowX.y-startX.y;
				//translateX=elemX+disX;
				//list.style.left=elemX+disX+'px';
				//list.style.transform='translate('+translateX+'px)';
				if(isFirst){
					isFirst=false;
					if(Math.abs(disY)>Math.abs(disX)){
						isX=false;
						auto();   //仿抖动时,轮播还是要继续
						return;
					}
				}
				transformCss(list,'translateX',elemX.x+disX);
			});
			wrap.addEventListener("touchend",function(ev){
				var touch=ev.changedTouches[0];
				//var left=list.offsetLeft;
				//var left=translateX;
				var left=transformCss(list,'translateX');
				now=Math.round(-left/document.documentElement.clientWidth);
				if(now<0){
					now=0
				}else if(now>lis.length-1){
					now=lis.length-1
				}
				//ul的偏移量
					//list.style.left = -now * document.documentElement.clientWidth + 'px';
				//var translateX=-now * document.documentElement.clientWidth;
				//list.style.transform='translate('+translateX+'px)';
				//list.style.transition='.5s';
				//transformCss(list,'translateX',translateX);
				simple(list,'translateX',now,".5s");
				setTimeout(function(){
						for(var i=0;i<spanNodes.length;i++){
							spanNodes[i].className='';
						}
						spanNodes[now%spanNodes.length].className='pic_active';
				},30);
				auto();
			});
			auto();
			var time;
			//var now=0;
			
			function auto(){
				clearInterval(time);
				time=setInterval(function(){
					
					if(now==lis.length-1){
						//list.style.transition='none';
						now=spanNodes.length-1;
						//var translateX=-now * document.documentElement.clientWidth;
						//transformCss(list,'translateX',translateX);
						simple(list,'translateX',now,"none");
					}
						setTimeout(function(){
							now++;
							//list.style.transition='.5s';
							//var translateX=-now * document.documentElement.clientWidth;
							//transformCss(list,'translateX',translateX);
							simple(list,'translateX',now,".5s");
							setTimeout(function(){
						for(var i=0;i<spanNodes.length;i++){
							spanNodes[i].className='';
						}
						spanNodes[now%spanNodes.length].className='pic_active';
				},600);
						},20);
					
				},3000);
			}
			//obj,对象 ;transformType: 变化类型；nowNum：当前图片索引号码 ；delay：延时时间
			function simple(obj,transformType,nowNum,delay){
				obj.style.transition=delay;
							var move=-nowNum * document.documentElement.clientWidth;
							transformCss(obj,transformType,move);
			}
		}
		
		
		//封装获取元素的方法
		function getEle(objId,num){
			if(arguments.length>1){
				return document.querySelectorAll('#'+objId);
			}else{
				return document.querySelector('#'+objId);
			}
			
		}
	}	
	</script>
</html>
